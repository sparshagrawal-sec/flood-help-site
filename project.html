<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flood Help ‚Äì Udham Singh Nagar</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:Arial,Helvetica,sans-serif;
      background:#001322;
      color:#eef;
      line-height:1.6;
      scroll-behavior:smooth;
    }
    header {
      background:linear-gradient(90deg,#014,#028);
      padding:20px;
      text-align:center;
      position:sticky;
      top:0;
      z-index:1000;
      box-shadow:0 4px 10px rgba(0,0,0,.6);
      animation:slideDown 1s ease;
    }
    header h1 {
      margin:0;
      font-size:26px;
      color:#fff;
      letter-spacing:1px;
      text-shadow:0 0 10px #00ccff;
    }
    nav { margin-top:8px; }
    nav a { color:#ccf; margin:0 12px; text-decoration:none; font-weight:bold; position:relative; transition:.3s; }
    nav a::after { content:""; position:absolute; bottom:-4px; left:0; width:0; height:2px; background:#ff0; transition:.3s; }
    nav a:hover::after { width:100%; }
    nav a.active { color:#ff0; }

    section { padding:60px 20px; animation:fadeInUp 1s; scroll-margin-top:100px; }
    section h2 { text-align:center; margin-bottom:25px; font-size:28px; color:#66d9ff; text-shadow:0 0 12px #0099ff; animation:glow 2s infinite alternate; }
    .card { background:rgba(255,255,255,.05); padding:20px; border-radius:15px; margin:20px auto; max-width:750px; box-shadow:0 6px 20px rgba(0,0,0,.5); transition:.4s; animation:fadeInUp 1s; }
    .card:hover { transform:translateY(-8px) scale(1.02); box-shadow:0 12px 30px rgba(0,0,0,.7); }
    .btn { display:inline-block; background:#09c; padding:12px 18px; margin-top:10px; color:#fff; border:none; border-radius:10px; cursor:pointer; font-weight:bold; transition:.3s; box-shadow:0 4px 15px rgba(0,0,0,.5); }
    .btn:hover { background:#0bf; transform:scale(1.05); }
    input, textarea { width:100%; padding:10px; margin:6px 0; border-radius:8px; border:1px solid #046; background:#012; color:#fff; }
    footer { background:#000c18; text-align:center; padding:20px; font-size:13px; color:#99a; animation:fadeIn 2s; }

    .weather-box { margin-top:15px; padding:15px; background:rgba(255,255,255,0.1); border-radius:10px; }
    .weather-box p { margin:6px 0; }

    #map { height:400px; width:100%; border-radius:15px; box-shadow:0 0 15px rgba(0,0,0,.6); margin-top:15px; }

    .hero { position: relative; background:linear-gradient(rgba(0,25,50,.7),rgba(0,25,50,.7)), url('https://upload.wikimedia.org/wikipedia/commons/0/05/Gaula_river_Haldwani.jpg') center/cover; height:320px; display:flex; align-items:center; justify-content:center; text-align:center; color:#fff; flex-direction:column; overflow:hidden; }
    .hero::after { content:""; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3); }
    .hero-content { position: relative; z-index:1; max-width:90%; }
    .hero-title { font-size:36px; font-weight:bold; background:linear-gradient(90deg,#00c6ff,#66ffff,#0072ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; white-space:nowrap; overflow:hidden; width:0; animation: typing 4s steps(40,end) forwards, glowPulse 2s infinite alternate 4s; }
    .hero-sub { margin-top:12px; font-size:18px; opacity:0; animation: fadeIn 2s ease 4s forwards; }

    @keyframes typing { from { width:0; } to { width:100%; } }
    @keyframes glowPulse { from { text-shadow:0 0 8px #00c6ff, 0 0 16px #0099ff; } to { text-shadow:0 0 20px #00ffff, 0 0 30px #00c6ff; } }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    @keyframes fadeInUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:none; } }
    @keyframes slideDown { from { transform:translateY(-60px); } to { transform:translateY(0); } }
    @keyframes glow { from { text-shadow:0 0 8px #00c6ff; } to { text-shadow:0 0 18px #0072ff; } }
  </style>
</head>
<body>

  <header>
    <h1>Flood Help ‚Äì Udham Singh Nagar</h1>
    <nav>
      <a href="#alerts">Alerts</a>
      <a href="#whatdo">What To Do</a>
      <a href="#helplines">Helplines</a>
      <a href="#mapSection">Flood Map</a>
      <a href="#report">Report</a>
      <a href="#about">About</a>
    </nav>
  </header>

  <div class="hero">
    <div class="hero-content">
      <div class="hero-title">POWERED BY GEO SOLUTIONS</div>
      <div class="hero-sub">Guidance, inundation map & reporting for local residents</div>
    </div>
  </div>

  <section id="alerts">
    <h2> Current Alerts & Weather</h2>
    <div class="card">
      <div id="weatherContainer" class="weather-box">
        <p><b>Loading weather...</b></p>
      </div>
      <p><i>Rain forecast data is from the Open-Meteo API.</i></p>
    </div>
  </section>

  <section id="whatdo">
    <h2>üö™ What To Do</h2>
    <div class="card">
      <h3>Before Flood</h3>
      <ul>
        <li>Keep food, water, medicines ready</li>
        <li>Store documents in waterproof bag</li>
        <li>Clear drains near your house</li>
      </ul>
    </div>
    <div class="card">
      <h3>During Flood</h3>
      <ul>
        <li>Move to higher ground quickly</li>
        <li>Switch off electricity at main</li>
        <li>Avoid walking/driving in flood water</li>
      </ul>
    </div>
  </section>

  <section id="helplines">
    <h2>üìû Important Helplines</h2>
    <div class="card">
      <p><b>District Disaster Management Authority:</b> 05944-250719</p>
      <p><b>Emergency Health:</b> 108</p>
      <p><b>Police / Rescue:</b> 112</p>
    </div>
  </section>

  <section id="mapSection">
    <h2>üó∫Ô∏è Flood Inundation Mapping</h2>
    <div class="card">
      <p>This map shows the <b>current estimated water levels</b> and areas potentially affected by flooding in Udham Singh Nagar.</p>
      <div id="map"></div>
    </div>
  </section>

  <section id="report">
    <h2>üìù Report Flood</h2>
    <div class="card">
      <form onsubmit="sendReport(event)">
        <label>Name:<input type="text" id="rname"></label>
        <label>Phone:<input type="text" id="rphone"></label>
        <label>Location:<input type="text" id="rloc"></label>
        <label>Details:<textarea id="rdetails"></textarea></label>
        <button class="btn" type="submit">Submit Report</button>
      </form>
      <p id="reportMsg"></p>
    </div>
  </section>

  <section id="about">
    <h2>About This Site</h2>
    <div class="card">
      <p>This website is for <b>local residents of Udham Singh Nagar</b>. It provides quick guidance, emergency contacts, live flood mapping, and a reporting system.</p>
      <p>Future versions can include live hydrological data and predictive flood modeling.</p>
    </div>
  </section>

  <footer>
    ¬©Ô∏è 2025 Udham Singh Nagar Flood Help ‚Ä¢ Built for community safety
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    async function fetchWeather() {
      const lat = 28.9845, lon = 79.4141;
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m&hourly=precipitation_probability,temperature_2m&forecast_days=1`;
      try {
        const resp = await fetch(url);
        const data = await resp.json();
        showWeather(data);
      } catch (err) {
        console.error("Weather fetch error:", err);
        document.getElementById("weatherContainer").innerHTML = `<p>Error loading weather.</p>`;
      }
    }

    function showWeather(data) {
      const cur = data.current;
      const temp = cur.temperature_2m.toFixed(1);
      const humidity = cur.relative_humidity_2m;
      const wind = cur.wind_speed_10m;
      const precip = cur.precipitation;
      const rainForecast = data.hourly.precipitation_probability.slice(0,12).some(p=>p>50) ? "High chance of rain in next 12h" : "Low rain probability next 12h";
      const html = `
        <p><b>Temperature:</b> ${temp} ¬∞C</p>
        <p><b>Humidity:</b> ${humidity}%</p>
        <p><b>Wind speed:</b> ${wind} m/s</p>
        <p><b>Precipitation:</b> ${precip} mm</p>
        <p><b>Rain forecast:</b> ${rainForecast}</p>
      `;
      document.getElementById("weatherContainer").innerHTML = html;
    }

    const map = L.map('map').setView([28.9845, 79.4141], 10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution:'¬©Ô∏è OpenStreetMap contributors'
    }).addTo(map);
    L.marker([28.9845, 79.4141])
      .addTo(map)
      .bindPopup("<b>Udham Singh Nagar</b><br>Demo water-level marker.")
      .openPopup();

    function sendReport(ev) {
      ev.preventDefault();
      let name = document.getElementById("rname").value || "Resident";
      let loc = document.getElementById("rloc").value || "(unspecified)";
      document.getElementById("reportMsg").innerText = "‚úÖ Thank you " + name + "! Your report for " + loc + " has been noted.";
      ev.target.reset();
    }

    const sections = document.querySelectorAll("section");
    const navLinks = document.querySelectorAll("nav a");
    window.addEventListener("scroll", () => {
      let current = "";
      sections.forEach(sec => {
        const secTop = sec.offsetTop - 120;
        if (window.scrollY >= secTop) {
          current = sec.getAttribute("id");
        }
      });
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 2) {
        current = "about";
      }
      navLinks.forEach(link => {
        link.classList.remove("active");
        if (link.getAttribute("href").includes(current)) {
          link.classList.add("active");
        }
      });
    });

    fetchWeather();
  </script>

</body>
</html>